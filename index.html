<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Profit Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
:root {
--bg-dark: #0a0e13;
--bg-gradient-start: #0b0f14;
--bg-gradient-end: #151a23;
--card-bg: rgba(18, 24, 32, 0.6);
--card-border: rgba(75, 179, 253, 0.15);
--muted: #77818f;
--text: #eaf0f6;
--accent: #4bb3fd;
--accent-glow: rgba(75, 179, 253, 0.3);
--ok: #39d98a;
--ok-glow: rgba(57, 217, 138, 0.2);
--warn: #efaa2e;
--warn-glow: rgba(239, 170, 46, 0.2);
--input-bg: rgba(15, 20, 27, 0.8);
--input-border: #243041;
--input-focus: #4bb3fd;
--shadow-sm: 0 2px 12px rgba(0, 0, 0, 0.4);
--shadow-md: 0 8px 32px rgba(0, 0, 0, 0.5);
--shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.6);
}

[data-theme="light"] {
--bg-gradient-start: #f5f7fa;
--bg-gradient-end: #e8ecf1;
--card-bg: rgba(255, 255, 255, 0.9);
--card-border: rgba(37, 99, 235, 0.15);
--muted: #666666;
--text: #1a1f2e;
--accent: #2563eb;
--accent-glow: rgba(37, 99, 235, 0.2);
--ok: #22c55e;
--ok-glow: rgba(34, 197, 94, 0.2);
--warn: #f59e0b;
--warn-glow: rgba(245, 158, 11, 0.2);
--input-bg: rgba(255, 255, 255, 0.95);
--input-border: #d0d8e0;
--input-focus: #2563eb;
--shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
--shadow-md: 0 4px 16px rgba(0, 0, 0, 0.1);
--shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
}
[data-theme="light"] body::before {
background: radial-gradient(circle, rgba(37, 99, 235, 0.05) 0%, transparent 70%);
}
/* ---UNMODIFIED CSS-- */
body {...}
.container {...}
header {...}
.theme-toggle {...}
h1 {...}
.subtitle {...}
.card {...}
.main-grid {...}
.card-title {...}
.input-grid {...}
.input-group {...}
label {...}
input[type="number"],
select {...}
table {...}
thead {...}
th {...}
td {...}
.badge {...}
.table-note {...}
.fee-table-card {...}
.platform-name {...}
.cell-with-arrows {...}
.cell-value {...}
.arrow-buttons {...}
.arrow-btn {...}
.fee-select {...}
.updating {...}
@media (max-width:768px) {...}
</style>
</head>
<body>
<div class="container">
<header>
<button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
<span class="theme-icon" id="themeIcon">üåô</span>
<span id="themeLabel">Dark</span>
</button>
<h1>Profit Calculator</h1>
<p class="subtitle">Calculate optimal pricing across multiple resale platforms. See required prices and net profits with platform-specific fees instantly.</p>
</header>
<div class="main-grid">
<div class="card">
<div style="margin-bottom: 20px; text-align: center;">
<button onclick="copySummary()" style="
width: 100%;
background: var(--accent);
color: white;
border: none;
padding: 12px 24px;
border-radius: 8px;
font-weight: bold;
cursor: pointer;
box-shadow: var(--shadow-sm);
transition: all 0.2s ease;"
onmouseover="this.style.transform='translateY(-2px)'"
onmouseout="this.style.transform='translateY(0)'">
üìã Copy Vendoo Notes
</button>
</div>
<h2 class="card-title">Input Parameters</h2>
<div class="input-grid">
<div class="input-group">
<label for="cogs">Cost of Goods</label>
<input id="cogs" type="number" step="0.01" value="1.25" />
</div>
<div class="input-group">
<label for="material">Material Cost</label>
<input id="material" type="number" step="0.01" value="0.95" />
</div>
<div class="input-group">
<label for="ship">Shipping Cost (seller)</label>
<input id="ship" type="number" step="0.01" value="6.00" />
</div>
<div class="input-group">
<label for="target">Target Profit</label>
<input id="target" type="number" step="0.01" value="5.00" />
</div>
<div class="input-group">
<label for="markup">Markup Percentage (%)</label>
<input id="markup" type="number" step="1" value="50" min="0" />
</div>
</div>
</div>
<div class="card">
<h2 class="card-title">Pricing Results</h2>
<table id="results">
  <thead>
    <tr>
      <th>Platform</th>
      <th>Required Price</th>
      <th>List (Markup)</th>
      <th>Revenue</th> <!-- NEW! -->
      <th>Fees @ List</th>
      <th>Net Profit</th> <!-- NEW! -->
      <th class="muted">Assumptions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
<div class="table-note">
<span class="badge">.99 rounding</span> Etsy, eBay ‚Ä¢
<span class="badge">Whole dollars</span> Depop, Poshmark, Mercari ‚Ä¢
Poshmark uses under $15 flat $2.95 vs 20% at $15+.
</div>
</div>
</div>
<div class="card fee-table-card">
<h2 class="card-title">Platform Fee Table</h2>
<p class="small muted" style="margin-bottom: 16px;">‚úèÔ∏è Click any cell to edit ‚Ä¢ Changes update results instantly</p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Fee %</th>
<th>Promo %</th>
<th>Flat Fee $</th>
<th>Seller Pays Ship?</th>
<th>Default Rounding</th>
</tr>
</thead>
<tbody id="feeRows"></tbody>
</table>
</div>
</div>
<script>
let currentTheme = 'dark';
function initTheme() {
setTheme(currentTheme);
}
function setTheme(theme) {
currentTheme = theme;
document.body.setAttribute('data-theme', theme);
const icon = document.getElementById('themeIcon');
const label = document.getElementById('themeLabel');
if (theme === 'light') {
icon.textContent = '‚òÄÔ∏è';
label.textContent = 'Light';
} else {
icon.textContent = 'üåô';
label.textContent = 'Dark';
}
}
function toggleTheme() {
const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
setTheme(newTheme);
}
initTheme();
document.getElementById('themeToggle').addEventListener('click', toggleTheme);

const PLATFORMS = [
{ name: 'Etsy', feePct: 0.095, promoPct: 0.00, flatFee: 0.45, sellerPaysShip: true, rounding: '.99' },
{ name: 'eBay', feePct: 0.136, promoPct: 0.12, flatFee: 0.30, sellerPaysShip: true, rounding: '.99' },
{ name: 'Depop', feePct: 0.033, promoPct: 0.08, flatFee: 0.45, sellerPaysShip: false, rounding: 'whole' },
{ name: 'Poshmark', feePct: 0.20, promoPct: 0.00, flatFee: 2.95, sellerPaysShip: false, rounding: 'whole' },
{ name: 'Mercari', feePct: 0.10, promoPct: 0.00, flatFee: 0.00, sellerPaysShip: false, rounding: 'whole' },
];
const ceilDot99 = (x) => Math.max(0.99, Math.ceil(x) - 0.01);
const ceilWhole = (x) => Math.ceil(x);
const money = (n) => '$' + Number(n).toFixed(2);

function getRoundingFor(platformName) {
const def = PLATFORMS.find(p => p.name === platformName)?.rounding || 'whole';
return def === '.99' ? ceilDot99 : ceilWhole;
}
function requiredPriceGeneric(costBaseNoFee, feePct, promoPct, flatFee) {
const rate = feePct + promoPct;
const denom = 1 - rate;
return (costBaseNoFee + flatFee) / Math.max(1e-9, denom);
}
function requiredPricePosh(costBaseNoFee, roundingFn) {
const rawA = costBaseNoFee + 2.95;
const rA = roundingFn(rawA);
const validA = rA < 15;
const rawB = costBaseNoFee / (1 - 0.20);
const rB = roundingFn(rawB);
const validB = rB >= 15;
if (validA && validB) {
return Math.min(rA, rB);
} else if (validA) {
return rA;
} else if (validB) {
return rB;
} else {
return 15;
}
}
function feesAtList(platform, listPrice) {
if (platform.name === 'Poshmark') {
if (listPrice < 15) return 2.95;
return listPrice * 0.20;
}
return listPrice * (platform.feePct + platform.promoPct) + platform.flatFee;
}

// --- MAIN LOGIC UPDATED ---
function compute() {
const cogs = parseFloat(document.getElementById('cogs').value) || 0;
const material = parseFloat(document.getElementById('material').value) || 0;
const ship = parseFloat(document.getElementById('ship').value) || 0;
const target = parseFloat(document.getElementById('target').value) || 0;
const markupPct = parseFloat(document.getElementById('markup').value) || 0;
const markup = 1 + (markupPct / 100);
const tbody = document.querySelector('#results tbody');
tbody.classList.add('updating');
setTimeout(() => {
tbody.innerHTML = '';
PLATFORMS.forEach((p, index) => {
const roundingFn = getRoundingFor(p.name);
const costBaseNoFee = target + cogs + material + (p.sellerPaysShip ? ship : 0);
let requiredRounded;
if (p.name === 'Poshmark') {
requiredRounded = requiredPricePosh(costBaseNoFee, roundingFn);
} else {
const requiredRaw = requiredPriceGeneric(costBaseNoFee, p.feePct, p.promoPct, p.flatFee);
requiredRounded = roundingFn(requiredRaw);
}
const listRounded = roundingFn(requiredRounded * markup);
const feeAtList = feesAtList(p, listRounded);
const shipCostAtList = p.sellerPaysShip ? ship : 0;

// NEW: revenue and full cost deduction for net profit!
const revenue = listRounded;
const netProfit = revenue - feeAtList - shipCostAtList - cogs - material;

const tr = document.createElement('tr');
tr.style.animationDelay = `${index * 0.05}s`;
tr.innerHTML = `
<td><span class="platform-name">${p.name}</span></td>
<td class="mono">${money(requiredRounded)}</td>
<td class="mono">${money(listRounded)}</td>
<td class="mono">${money(revenue)}</td>
<td class="mono">${money(feeAtList)}</td>
<td class="mono ${netProfit >= target ? 'ok' : 'warn'}">${money(netProfit)}</td>
<td class="muted small">${(p.sellerPaysShip ? 'Seller pays ship' : 'Buyer pays ship')} ‚Ä¢ ${p.rounding === '.99' ? '.99' : 'Whole'}</td>
`;
tbody.appendChild(tr);
});
tbody.classList.remove('updating');
}, 100);
}

function renderFees() {...}
function attachEditListeners() {...}
function handleCellEdit(e) {...}
function handleArrowClick(e) {...}
function handleSelectChange(e) {...}
let debounceTimer;
function debounceCompute() {...}
let debounceAvgCompTimer;
function debounceAvgComp() {...}

// Input listeners
const inputs = ['cogs', 'material', 'ship', 'target', 'markup'];
inputs.forEach(id => {
const element = document.getElementById(id);
element.addEventListener('input', debounceCompute);
});

// --- FEATURE: Copy Summary ---
function copySummary() {
const cogs = document.getElementById('cogs').value;
const material = document.getElementById('material').value;
const ship = document.getElementById('ship').value;
const target = document.getElementById('target').value;
const markup = document.getElementById('markup').value;
const text = `Cost: $${cogs} | Mat: $${material} | Ship: $${ship} | Target: $${target} | Buffer: ${markup}%`;
navigator.clipboard.writeText(text).then(() => {
const btn = document.querySelector('button[onclick="copySummary()"]');
const originalText = btn.innerText;
btn.innerText = "‚úÖ Copied!";
setTimeout(() => btn.innerText = originalText, 1500);
});
}

// --- FEATURE: Local Storage Auto-Save ---
const saveIds = ['cogs', 'material', 'ship', 'target', 'markup'];
window.addEventListener('DOMContentLoaded', () => {
saveIds.forEach(id => {
const saved = localStorage.getItem('vendoo_calc_' + id);
if (saved) document.getElementById(id).value = saved;
});
if (typeof compute === 'function') compute();
});
saveIds.forEach(id => {
const el = document.getElementById(id);
if (el) {
el.addEventListener('input', (e) => {
localStorage.setItem('vendoo_calc_' + id, e.target.value);
});
}
});
renderFees();
compute();
</script>
</body>
</html>
